<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Procurement Requisition</title>
        <style>
            :root {
                --primary: #b91c1c; /* red-700 */
                --text: #111827; /* gray-900 */
                --muted: #6b7280; /* gray-500 */
                --border: #e5e7eb; /* gray-200 */
            }
            * {
                box-sizing: border-box;
            }
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif;
                color: var(--text);
                margin: 0;
                padding: 28px;
            }
            h1,
            h2,
            h3 {
                margin: 0;
            }
            .header {
                text-align: center;
                margin-bottom: 18px;
            }
            .title {
                font-size: 20px;
                font-weight: 700;
            }
            .subtitle {
                font-size: 16px;
                font-weight: 700;
                margin-top: 4px;
            }
            .section-title {
                font-weight: 700;
                color: var(--primary);
                padding-bottom: 6px;
                border-bottom: 2px solid var(--primary);
                margin: 18px 0 10px;
            }
            .grid {
                display: grid;
                grid-template-columns: 1fr 1fr 1fr;
                gap: 10px;
            }
            .grid-2 {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 10px;
            }
            .field {
                display: flex;
                flex-direction: column;
                font-size: 12px;
            }
            .label {
                font-weight: 600;
                margin-bottom: 4px;
            }
            .value {
                padding: 8px 10px;
                border: 1px solid var(--border);
                border-radius: 6px;
                background: #fff;
            }
            table {
                width: 100%;
                border-collapse: collapse;
            }
            th,
            td {
                border: 1px solid var(--border);
                padding: 8px;
                font-size: 12px;
            }
            thead th {
                background: #f9fafb;
                text-align: left;
                font-weight: 700;
            }
            .totals {
                text-align: right;
                margin-top: 10px;
                font-size: 12px;
            }
            .muted {
                color: var(--muted);
            }
            .spacer {
                height: 10px;
            }
        </style>
    </head>
    <body>
        <div class="header" style="text-align: center; margin-bottom: 12px">
            <img src="{{logoData}}" alt="BSJ logo" style="height: 44px; object-fit: contain; margin: 0 auto 8px" />
            <div class="title">Bureau of Standards Jamaica</div>
            <div class="subtitle">Procurement Requisition Form</div>
            <div style="font-size: 14px; font-weight: 700; color: var(--primary); margin-top: 8px">{{reference}}</div>
        </div>

        <div class="section-title">Request Information</div>
        <div class="grid">
            <div class="field">
                <div class="label">REFERENCE</div>
                <div class="value">{{reference}}</div>
            </div>
            <div class="field">
                <div class="label">STATUS</div>
                <div class="value">{{status}}</div>
            </div>
            <div class="field">
                <div class="label">SUBMITTED DATE</div>
                <div class="value">{{submittedDate}}</div>
            </div>
        </div>
        <div class="grid">
            <div class="field">
                <div class="label">REQUESTER</div>
                <div class="value">{{requesterName}}</div>
            </div>
            <div class="field">
                <div class="label">DEPARTMENT</div>
                <div class="value">{{departmentName}}</div>
            </div>
            <div class="field">
                <div class="label">PRIORITY</div>
                <div class="value">{{priority}}</div>
            </div>
        </div>
        <div class="field">
            <div class="label">TITLE / DESCRIPTION</div>
            <div class="value">{{description}}</div>
        </div>

        <div class="section-title">Financial Details</div>
        <div class="grid-2">
            <div class="field">
                <div class="label">CURRENCY</div>
                <div class="value">{{currency}}</div>
            </div>
            <div class="field">
                <div class="label">TOTAL AMOUNT</div>
                <div class="value">{{currency}} ${{totalEstimated}}</div>
            </div>
        </div>

        <div class="section-title">Requested Items</div>
        <table>
            <thead>
                <tr>
                    <th style="width: 36px">#</th>
                    <th>Description</th>
                    <th style="width: 64px">Qty</th>
                    <th style="width: 80px">Unit of Measure</th>
                    <th style="width: 100px">Unit Price</th>
                    <th style="width: 100px">Part Number</th>
                    <th style="width: 110px">Subtotal</th>
                </tr>
            </thead>
            <tbody>
                {{itemsRows}}
            </tbody>
        </table>
        <div class="totals"><strong>Total:</strong> {{totalEstimated}}</div>

        <div class="section-title">Comments / Justification</div>
        <div class="field">
            <div class="value" style="min-height: 60px; white-space: pre-wrap">{{justification}}</div>
        </div>

        <div class="section-title">Approvals</div>
        <div class="grid-2">
            <div class="field">
                <div class="label">Manager Name</div>
                <div class="value">{{managerName}}</div>
            </div>
            <div class="field">
                <div class="label">Manager Approval Date</div>
                <div class="value">{{managerApprovalDate}}</div>
            </div>
        </div>
        <div class="grid-2">
            <div class="field">
                <div class="label">Head of Division Name</div>
                <div class="value">{{headName}}</div>
            </div>
            <div class="field">
                <div class="label">HOD Approval Date</div>
                <div class="value">{{hodApprovalDate}}</div>
            </div>
        </div>
        <div class="grid-2">
            <div class="field">
                <div class="label">Chief Accountant Name</div>
                <div class="value">{{budgetOfficerName}}</div>
            </div>
            <div class="field">
                <div class="label">Chief Accountant Approval Date</div>
                <div class="value">{{budgetOfficerApprovalDate}}</div>
            </div>
        </div>
        <div class="grid-2">
            <div class="field">
                <div class="label">Finance Director Name</div>
                <div class="value">{{budgetManagerName}}</div>
            </div>
            <div class="field">
                <div class="label">Finance Director Approval Date</div>
                <div class="value">{{budgetManagerApprovalDate}}</div>
            </div>
        </div>
        <div class="grid">
            <div class="field">
                <div class="label">Commitment No.</div>
                <div class="value">{{commitmentNumber}}</div>
            </div>
            <div class="field">
                <div class="label">Accounting Code</div>
                <div class="value">{{accountingCode}}</div>
            </div>
            <div class="field">
                <div class="label">Procurement Approval Date</div>
                <div class="value">{{procurementApprovalDate}}</div>
            </div>
        </div>
        <div class="grid">
            <div class="field">
                <div class="label">Status</div>
                <div class="value">{{status}}</div>
            </div>
            <div class="field">
                <div class="label">Assigned To</div>
                <div class="value">{{assigneeName}}</div>
            </div>
            <div class="field">
                <div class="label">Submitted Date</div>
                <div class="value">{{submittedDate}}</div>
            </div>
        </div>

        <div class="section-title">Procurement</div>
        <div class="grid">
            <div class="field">
                <div class="label">Case Number</div>
                <div class="value">{{procurementCaseNumber}}</div>
            </div>
            <div class="field">
                <div class="label">Received By</div>
                <div class="value">{{receivedBy}}</div>
            </div>
            <div class="field">
                <div class="label">Date Received</div>
                <div class="value">{{dateReceived}}</div>
            </div>
        </div>
        <div class="grid-2">
            <div class="field">
                <div class="label">Action Date</div>
                <div class="value">{{actionDate}}</div>
            </div>
            <div class="field">
                <div class="label">Procurement Comments</div>
                <div class="value">{{procurementComments}}</div>
            </div>
        </div>

        <div class="spacer"></div>
        <div class="muted" style="font-size: 10px">Generated by PMS â€¢ {{now}}</div>

        <!-- Fixed footer for printed pages -->
        <div style="position: fixed; bottom: 8px; left: 12px; right: 12px; font-size: 11px; color: var(--muted); text-align: left">
            <div>{{docControl}}</div>
        </div>

        <!-- Signature page (will be output as its own final page) -->
        <div style="page-break-before: always; padding: 60px 28px 120px">
            <div style="max-width: 1100px; margin: 0 auto; display: flex; justify-content: flex-end">
                <div style="width: 360px; height: 2.2rem"></div>
            </div>
        </div>
    </body>
</html>
